"use strict";(self.webpackChunkinference_portal=self.webpackChunkinference_portal||[]).push([[461],{45461:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var r=n(96540),a=n(46266),o=n(69067),s=n(8239),i=n(11848),u=n(14073),l=n(60538),c=n(30995),m=n(97834),p=n(25239),f=n(49799),d=n(82241),h=n(42471),y=n(71543),g=n(37211),b=n(44090),S=n(48158),v=n(35453),_=n(83248),E=n(92497),A=n(6276);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,s,i=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){var r,a,o,s;r=e,a=t,o=n[t],s=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==w(s)?s:s+"")in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=(0,i.Ay)(l.A)((function(e){var t=e.theme;return k({minWidth:300,height:700,overflow:"auto",padding:t.spacing(2)},t.typography.body2)})),x=(0,i.Ay)(h.A)((function(e){return k({width:"100%"},e.theme.typography.body2)}));const I=function(){(0,r.useRef)();var e=(0,r.useRef)(null),t=(0,r.useRef)(null),n=(0,r.useRef)(null),i=O((0,r.useState)(!1),2),h=i[0],w=i[1],j=O((0,r.useState)(!1),2),P=j[0],k=j[1],I=O((0,r.useState)("Assignment Agent"),2),M=I[0],R=I[1],T=O((0,r.useState)([]),2),W=T[0],B=T[1],D=O((0,r.useState)([]),2),q=D[0],J=D[1],U=O((0,r.useState)([]),2),N=U[0],z=U[1],H=O((0,r.useState)([]),2),F=H[0],G=H[1],K=O((0,r.useState)("gpt-4"),2),L=K[0],V=K[1],$=O((0,r.useState)("Mistral Chat 13B"),2),Q=$[0],X=$[1],Y=O((0,r.useState)(.72),2),Z=Y[0],ee=Y[1],te=O((0,r.useState)(-1),2),ne=te[0],re=te[1],ae=O((0,r.useState)("chat"),2),oe=ae[0],se=ae[1],ie=O((0,r.useState)(512),2),ue=ie[0],le=ie[1],ce=O((0,r.useState)(!0),2),me=ce[0],pe=ce[1],fe=O((0,r.useState)(.73),2),de=fe[0],he=fe[1],ye=O((0,r.useState)(!1),2),ge=ye[0],be=ye[1],Se=O((0,r.useState)(!1),2),ve=Se[0],_e=Se[1],Ee=O((0,r.useState)(2),2),Ae=Ee[0],we=Ee[1],Oe=O((0,r.useState)(0),2),je=Oe[0],Pe=Oe[1],ke=O((0,r.useState)(0),2),Ce=ke[0],xe=ke[1],Ie=O((0,r.useState)(0),2),Me=Ie[0],Re=Ie[1],Te=O((0,r.useState)(""),2),We=Te[0],Be=Te[1],De=O((0,r.useState)(!1),2),qe=De[0],Je=De[1],Ue=O((0,r.useState)(""),2),Ne=Ue[0],ze=Ue[1],He=O((0,r.useState)(!1),2),Fe=He[0],Ge=He[1],Ke=O((0,r.useState)(1),2),Le=Ke[0],Ve=(Ke[1],O((0,r.useState)([]),2)),$e=Ve[0],Qe=Ve[1],Xe=O((0,r.useState)([]),2),Ye=Xe[0],Ze=Xe[1],et=O((0,r.useState)(""),2),tt=et[0],nt=et[1],rt=O((0,r.useState)(""),2),at=rt[0],ot=rt[1],st=O((0,r.useState)(!0),2),it=st[0],ut=st[1];(0,r.useEffect)((function(){a.A.all([a.A.get("/frontend-api/model"),a.A.get("/frontend-api/instruction-tree")]).then(a.A.spread((function(e,t){for(var n in B(e.data.models),G(e.data.models_agent),Qe(t.data.root_nodes),ot(t.data.default_children[0].instruct),Ze(t.data.default_children),t.data.root_nodes)t.data.root_nodes[n].name==M&&nt(t.data.root_nodes[n].instruct)}))).catch((function(e){console.log(e)}))}),[]);var lt=function(){var e;null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})};(0,r.useEffect)((function(){lt()}),[q]),(0,r.useEffect)((function(){lt()}),[N]);var ct="https:"==window.location.protocol?"wss":"ws",mt=window.location.pathname.split("/").filter((function(e){return""!==e}));(0,r.useEffect)((function(){e.current=new WebSocket(ct+"://"+window.location.host+"/ws/engineer/"+mt[mt.length-1]+"/"),t.current=new WebSocket(ct+"://"+window.location.host+"/ws/chat/"+mt[mt.length-1]+"/"),(0,A.u)(t,J,k,document),(0,A.j)(e,z,w,document,nt,ot,Ze,null,null,null)}),[]);var pt=function(e){"Enter"!=e.key||e.shiftKey||(it?(ht(),dt()):it||"chat-input"!=e.target.id?it||"agent-input"!=e.target.id||dt():ht())},ft=function(e){it&&(ze(e),Be(e))},dt=function(){if(""==Ne)Ge(!0);else{var t={currentParagraph:Le,message:Ne,choosen_models:L,choosen_template:M,role:"Human",top_p:Z,max_tokens:ue,frequency_penalty:Ce,presence_penalty:je,temperature:de,agent_instruction:tt,child_instruction:at};e.current.send(JSON.stringify(t)),ze("")}},ht=function(){if(""==We)Je(!0);else{var e={mode:oe,message:We,choosen_models:Q,role:"Human",top_k:ne,top_p:Z,best_of:Ae,max_tokens:ue,frequency_penalty:Ce,presence_penalty:je,temperature:de,beam:ge,early_stopping:ve,length_penalty:Me,include_memory:me};t.current.send(JSON.stringify(e)),Be("")}};return r.createElement(m.A,{maxWidth:!1,sx:{minWidth:1500},disableGutters:!0},r.createElement("title",null,"Agent"),r.createElement(v.A,null),r.createElement(m.A,{maxWidth:!1,sx:{minWidth:1500}},r.createElement(o.A,{m:1},r.createElement(s.Ay,{container:!0,spacing:2},r.createElement(s.Ay,{item:!0,xs:2},r.createElement(f.A,{subheader:r.createElement(S.A,{component:"div",id:"nested-list-subheader"},"Template Structure")},Ye.map((function(t){return r.createElement(b.Ay,{disablePadding:!0},r.createElement(g.A,null,r.createElement(d.A,{onClick:function(){return n=t.name,void e.current.send(JSON.stringify({swap_child_instruct:n}));var n},primary:t.name})))}))),r.createElement(y.A,null),r.createElement(c.A,{mt:1,spacing:1},r.createElement(u.A,{variant:"h6",gutterBottom:!0},"Parent Instruction"),r.createElement(l.A,null,r.createElement(x,{id:"parent-instruct",multiline:!0,maxRows:8,value:tt,onChange:function(e){return nt(e.target.value)},minRows:6,variant:"standard",InputProps:{startAdornment:r.createElement(p.A,{position:"start"},"   ")}})),r.createElement(y.A,null),r.createElement(u.A,{variant:"h6",gutterBottom:!0},"Child Instruction"),r.createElement(l.A,null,r.createElement(x,{id:"child-instruct",multiline:!0,maxRows:8,value:at,onChange:function(e){return ot(e.target.value)},minRows:6,variant:"standard",InputProps:{startAdornment:r.createElement(p.A,{position:"start"},"   ")}})))),r.createElement(s.Ay,{item:!0,xs:4},r.createElement(_.a,{id:"chat-log",inputsize:660,chat_message:q,usermessage:We,usermessageError:qe,ChatPaper:C,ChatInput:x,setUserMessage:Be,submitChat:ht,messagesEndRef:n,shownthinking:P,handleEnter:pt,check_duplicate_message:ft})),r.createElement(s.Ay,{item:!0,xs:4},r.createElement(_.a,{id:"chat-log-agent",inputsize:660,chat_message:N,usermessage:Ne,usermessageError:Fe,ChatPaper:C,ChatInput:x,setUserMessage:ze,submitChat:dt,messagesEndRef:n,shownthinking:h,handleEnter:pt,check_duplicate_message:ft})),r.createElement(s.Ay,{item:!0,xs:2},r.createElement(E.WJ,{template_list:$e,choosen_template:M,setChoosenTemplate:R,model_objects:W,agent_objects:F,choosen_chat_model:Q,choosen_agent_model:L,top_k:ne,top_p:Z,max_tokens:ue,temperature:de,mode:oe,bestof:Ae,lengthpenalty:Me,presencepenalty:je,frequencypenalty:Ce,setBeam:be,setMaxToken:le,setBestof:we,setTemperature:he,setMode:se,setLengthPenalty:Re,setPresencePenalty:Pe,setFrequencyPenalty:xe,setTopk:re,setTopp:ee,setUseMemory:pe,earlystopping:ve,setEarlyStopping:_e,setChoosenAgentModel:V,setChoosenChatModel:X,setDuplicateMessage:ut}))))))}}}]);