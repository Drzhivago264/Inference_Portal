import{P as g,a as e,j as t,D as O,b as k,c as q,B as x,T as I,d as J,M,a6 as R,X as F,J as b}from"./index-BgTNlE3K.js";import{I as G}from"./ItemCard-C3XUgP8C.js";import{T as H}from"./tools_empty-CipbKgm6.js";import{u as P,S as A,D as V,a as B,B as W}from"./useApi-H2a3O-a6.js";import{a as w,A as X}from"./AssistantDialog-Cm3JT-gr.js";import{C as z}from"./CredentialInputHandler-Tm9MuCGQ.js";import{D as Y}from"./Dropdown-CBMARjVX.js";import{E as K,V as Q}from"./ErrorBoundary-DJvKZGfQ.js";import{S as E}from"./useNotifier-C3gm9LlJ.js";import"./Grid-Cq2i7Qbd.js";import"./TooltipWithParser-Ct71_EQj.js";import"./TextField-dkTUQuhn.js";import"./FormControl-D-oBzX_C.js";import"./CredentialListDialog-CbgBEUU8.js";import"./Input-DweKhHD3.js";const T=({show:a,dialogProps:p,onCancel:j,onAssistantSelected:h,setError:u})=>{const S=document.getElementById("portal"),s=P(w.getAllAvailableAssistants),[r,m]=e.useState(""),[C,l]=e.useState([]),[d,f]=e.useState("");e.useEffect(()=>()=>{m(""),l([]),f("")},[p]),e.useEffect(()=>{if(s.data&&s.data.length){const i=[];for(let n=0;n<s.data.length;n+=1)i.push({label:s.data[n].name,name:s.data[n].id,description:s.data[n].instructions});l(i)}},[s.data]),e.useEffect(()=>{s.error&&u(s.error)},[s.error]);const D=a?t.jsxs(O,{fullWidth:!0,maxWidth:"xs",open:a,onClose:j,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[t.jsx(k,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:p.title}),t.jsxs(q,{children:[t.jsxs(x,{sx:{p:2},children:[t.jsx(A,{sx:{position:"relative"},direction:"row",children:t.jsxs(I,{variant:"overline",children:["OpenAI Credential",t.jsx("span",{style:{color:"red"},children:" *"})]})}),t.jsx(z,{data:r?{credential:r}:{},inputParam:{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["openAIApi"]},onSelect:i=>{m(i),i&&s.request(i)}},r)]}),r&&t.jsxs(x,{sx:{p:2},children:[t.jsx(A,{sx:{position:"relative"},direction:"row",children:t.jsxs(I,{variant:"overline",children:["Assistants",t.jsx("span",{style:{color:"red"},children:" *"})]})}),t.jsx(Y,{name:d,options:C,onSelect:i=>f(i),value:d??"choose an option"})]})]}),d&&t.jsx(V,{children:t.jsx(B,{variant:"contained",onClick:()=>h(d,r),children:"Load"})})]}):null;return J.createPortal(D,S)};T.propTypes={show:g.bool,dialogProps:g.object,onCancel:g.func,onAssistantSelected:g.func,setError:g.func};const pt=()=>{const a=P(w.getAllAssistants),[p,j]=e.useState(!0),[h,u]=e.useState(null),[S,s]=e.useState(!1),[r,m]=e.useState({}),[C,l]=e.useState(!1),[d,f]=e.useState({}),D=()=>{f({title:"Load Existing Assistant"}),l(!0)},i=(o,c)=>{l(!1),n(o,c)},n=(o,c)=>{m({title:"Add New Assistant",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add",selectedOpenAIAssistantId:o,credential:c}),s(!0)},N=o=>{m({title:"Edit Assistant",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",data:o}),s(!0)},L=()=>{s(!1),a.request()};return e.useEffect(()=>{a.request()},[]),e.useEffect(()=>{j(a.loading)},[a.loading]),e.useEffect(()=>{a.error&&u(a.error)},[a.error]),t.jsxs(t.Fragment,{children:[t.jsx(M,{children:h?t.jsx(K,{error:h}):t.jsxs(A,{flexDirection:"column",sx:{gap:3},children:[t.jsxs(Q,{title:"OpenAI Assistants",children:[t.jsx(W,{variant:"outlined",onClick:D,startIcon:t.jsx(R,{}),sx:{borderRadius:2,height:40},children:"Load"}),t.jsx(B,{variant:"contained",sx:{borderRadius:2,height:40},onClick:n,startIcon:t.jsx(F,{}),children:"Add"})]}),p?t.jsxs(x,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:b,children:[t.jsx(E,{variant:"rounded",height:160}),t.jsx(E,{variant:"rounded",height:160}),t.jsx(E,{variant:"rounded",height:160})]}):t.jsx(x,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:b,children:a.data&&a.data.map((o,c)=>{var v,y;return t.jsx(G,{data:{name:(v=JSON.parse(o.details))==null?void 0:v.name,description:(y=JSON.parse(o.details))==null?void 0:y.instructions,iconSrc:o.iconSrc},onClick:()=>N(o)},c)})}),!p&&(!a.data||a.data.length===0)&&t.jsxs(A,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[t.jsx(x,{sx:{p:2,height:"auto"},children:t.jsx("img",{style:{objectFit:"cover",height:"16vh",width:"auto"},src:H,alt:"ToolEmptySVG"})}),t.jsx("div",{children:"No Assistants Added Yet"})]})]})}),t.jsx(T,{show:C,dialogProps:d,onCancel:()=>l(!1),onAssistantSelected:i,setError:u}),t.jsx(X,{show:S,dialogProps:r,onCancel:()=>s(!1),onConfirm:L,setError:u})]})};export{pt as default};
