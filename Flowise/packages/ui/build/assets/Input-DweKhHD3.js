import{N as z,O as _,s as G,_ as p,a as u,R as H,U as O,bU as j,j as s,V as A,W,e as k,cf as it,ah as rt,cg as lt,bK as ct,bI as Y,af as dt,P as m,p as pt,T as ut,aF as mt,B as xt,aG as gt,aA as U,K as B,F as bt,c0 as ht}from"./index-BgTNlE3K.js";import{S as ft,I as vt,O as yt,P as It}from"./useApi-H2a3O-a6.js";import{F as Q}from"./FormControl-D-oBzX_C.js";function Ct(t){return _("MuiListItem",t)}const jt=z("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),v=jt;function At(t){return _("MuiListItemSecondaryAction",t)}z("MuiListItemSecondaryAction",["root","disableGutters"]);const St=["className"],Rt=t=>{const{disableGutters:e,classes:a}=t;return W({root:["root",e&&"disableGutters"]},At,a)},Lt=G("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:a}=t;return[e.root,a.disableGutters&&e.disableGutters]}})(({ownerState:t})=>p({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})),Z=u.forwardRef(function(e,a){const n=H({props:e,name:"MuiListItemSecondaryAction"}),{className:r}=n,o=O(n,St),l=u.useContext(j),i=p({},n,{disableGutters:l.disableGutters}),c=Rt(i);return s.jsx(Lt,p({className:A(c.root,r),ownerState:i,ref:a},o))});Z.muiName="ListItemSecondaryAction";const wt=Z,$t=["className"],Nt=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Ft=(t,e)=>{const{ownerState:a}=t;return[e.root,a.dense&&e.dense,a.alignItems==="flex-start"&&e.alignItemsFlexStart,a.divider&&e.divider,!a.disableGutters&&e.gutters,!a.disablePadding&&e.padding,a.button&&e.button,a.hasSecondaryAction&&e.secondaryAction]},Vt=t=>{const{alignItems:e,button:a,classes:n,dense:r,disabled:o,disableGutters:l,disablePadding:i,divider:c,hasSecondaryAction:x,selected:h}=t;return W({root:["root",r&&"dense",!l&&"gutters",!i&&"padding",c&&"divider",o&&"disabled",a&&"button",e==="flex-start"&&"alignItemsFlexStart",x&&"secondaryAction",h&&"selected"],container:["container"]},Ct,n)},kt=G("div",{name:"MuiListItem",slot:"Root",overridesResolver:Ft})(({theme:t,ownerState:e})=>p({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!e.disablePadding&&p({paddingTop:8,paddingBottom:8},e.dense&&{paddingTop:4,paddingBottom:4},!e.disableGutters&&{paddingLeft:16,paddingRight:16},!!e.secondaryAction&&{paddingRight:48}),!!e.secondaryAction&&{[`& > .${it.root}`]:{paddingRight:48}},{[`&.${v.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${v.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:k(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${v.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:k(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${v.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.alignItems==="flex-start"&&{alignItems:"flex-start"},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${v.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:k(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:k(t.palette.primary.main,t.palette.action.selectedOpacity)}}},e.hasSecondaryAction&&{paddingRight:48})),Ot=G("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),Gt=u.forwardRef(function(e,a){const n=H({props:e,name:"MuiListItem"}),{alignItems:r="center",autoFocus:o=!1,button:l=!1,children:i,className:c,component:x,components:h={},componentsProps:S={},ContainerComponent:R="li",ContainerProps:{className:L}={},dense:w=!1,disabled:y=!1,disableGutters:I=!1,disablePadding:$=!1,divider:d=!1,focusVisibleClassName:N,secondaryAction:q,selected:et=!1,slotProps:st={},slots:ot={}}=n,at=O(n.ContainerProps,$t),nt=O(n,Nt),D=u.useContext(j),M=u.useMemo(()=>({dense:w||D.dense||!1,alignItems:r,disableGutters:I}),[r,D.dense,w,I]),T=u.useRef(null);rt(()=>{o&&T.current&&T.current.focus()},[o]);const f=u.Children.toArray(i),K=f.length&&lt(f[f.length-1],["ListItemSecondaryAction"]),F=p({},n,{alignItems:r,autoFocus:o,button:l,dense:M.dense,disabled:y,disableGutters:I,disablePadding:$,divider:d,hasSecondaryAction:K,selected:et}),J=Vt(F),X=ct(T,a),V=ot.root||h.Root||kt,C=st.root||S.root||{},g=p({className:A(J.root,C.className,c),disabled:y},nt);let b=x||"li";return l&&(g.component=x||"div",g.focusVisibleClassName=A(v.focusVisible,N),b=dt),K?(b=!g.component&&!x?"div":b,R==="li"&&(b==="li"?b="div":g.component==="li"&&(g.component="div")),s.jsx(j.Provider,{value:M,children:s.jsxs(Ot,p({as:R,className:A(J.container,L),ref:X,ownerState:F},at,{children:[s.jsx(V,p({},C,!Y(V)&&{as:b,ownerState:p({},F,C.ownerState)},g,{children:f})),f.pop()]}))})):s.jsx(j.Provider,{value:M,children:s.jsxs(V,p({},C,{as:b,ref:X},!Y(V)&&{ownerState:p({},F,C.ownerState)},g,{children:[f,q&&s.jsx(wt,{children:q})]}))})}),E=Gt;function Mt(t){return _("MuiListItemAvatar",t)}z("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Tt=["className"],Ut=t=>{const{alignItems:e,classes:a}=t;return W({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},Mt,a)},Bt=G("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:a}=t;return[e.root,a.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({ownerState:t})=>p({minWidth:56,flexShrink:0},t.alignItems==="flex-start"&&{marginTop:8})),Et=u.forwardRef(function(e,a){const n=H({props:e,name:"MuiListItemAvatar"}),{className:r}=n,o=O(n,Tt),l=u.useContext(j),i=p({},n,{alignItems:l.alignItems}),c=Ut(i);return s.jsx(Bt,p({className:A(c.root,r),ownerState:i,ref:a},o))}),P=Et,Pt="/assets/robot-CdlpHV-J.png",zt="/assets/chathistory-iygi9HAP.png",tt=({availableNodesForVariable:t,disabled:e=!1,onSelectAndReturnVal:a})=>{const n=pt(o=>o.customization),r=(o,l)=>{const c=`{{${o?`${o.id}.data.instance`:l}}}`;a(c)};return s.jsx(s.Fragment,{children:!e&&s.jsxs("div",{style:{flex:30},children:[s.jsx(ft,{flexDirection:"row",sx:{mb:1,ml:2,mt:2},children:s.jsx(ut,{variant:"h5",children:"Select Variable"})}),s.jsx(mt,{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:s.jsx(xt,{sx:{pl:2,pr:2},children:s.jsxs(gt,{children:[s.jsx(U,{sx:{p:0,borderRadius:`${n.borderRadius}px`,boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:e,onClick:()=>r(null,"question"),children:s.jsxs(E,{alignItems:"center",children:[s.jsx(P,{children:s.jsx("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:s.jsx("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"AI",src:Pt})})}),s.jsx(B,{sx:{ml:1},primary:"question",secondary:"User's question from chatbox"})]})}),s.jsx(U,{sx:{p:0,borderRadius:`${n.borderRadius}px`,boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:e,onClick:()=>r(null,"chat_history"),children:s.jsxs(E,{alignItems:"center",children:[s.jsx(P,{children:s.jsx("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:s.jsx("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"chatHistory",src:zt})})}),s.jsx(B,{sx:{ml:1},primary:"chat_history",secondary:"Past conversation history between user and AI"})]})}),t&&t.length>0&&t.map((o,l)=>{const i=o.data.outputAnchors[0].options.find(c=>c.name===o.data.outputs.output);return s.jsx(U,{sx:{p:0,borderRadius:`${n.borderRadius}px`,boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:e,onClick:()=>r(o),children:s.jsxs(E,{alignItems:"center",children:[s.jsx(P,{children:s.jsx("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:s.jsx("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:o.data.name,src:`${bt}/api/v1/node-icon/${o.data.name}`})})}),s.jsx(B,{sx:{ml:1},primary:o.data.inputs.chainName??o.data.inputs.functionName??o.data.inputs.variableName??o.data.id,secondary:o.data.name==="ifElseFunction"?`${o.data.description}`:`${(i==null?void 0:i.label)??"output"} from ${o.data.label}`})]})},l)})]})})})]})})};tt.propTypes={availableNodesForVariable:m.array,disabled:m.bool,onSelectAndReturnVal:m.func};const _t=({inputParam:t,value:e,nodes:a,edges:n,nodeId:r,onChange:o,disabled:l=!1})=>{const[i,c]=u.useState(e??""),[x,h]=u.useState(null),[S,R]=u.useState([]),L=u.useRef(null),w=!!x,y=()=>{h(null)},I=d=>{const N=i+d.substring(2);o(N),c(N)},$=d=>{switch(d){case"string":return"text";case"password":return"password";case"number":return"number";default:return"text"}};return u.useEffect(()=>{if(!l&&a&&n&&r&&t){const d=t!=null&&t.acceptVariable?ht(a,n,r,t.id):[];R(d)}},[l,t,a,n,r]),u.useEffect(()=>{typeof i=="string"&&i&&i.endsWith("{{")&&h(L.current)},[i]),s.jsxs(s.Fragment,{children:[t.name==="note"?s.jsx(Q,{sx:{width:"100%",height:"auto"},size:"small",children:s.jsx(vt,{id:r,size:"small",disabled:l,type:$(t.type),placeholder:t.placeholder,multiline:!!t.rows,minRows:t.rows??1,value:i,name:t.name,onChange:d=>{c(d.target.value),o(d.target.value)},inputProps:{step:t.step??1,style:{border:"none",background:"none",color:"#212121"}},sx:{border:"none",background:"none",padding:"10px 14px",textarea:{"&::placeholder":{color:"#616161"}}}})}):s.jsx(Q,{sx:{mt:1,width:"100%"},size:"small",children:s.jsx(yt,{id:t.name,size:"small",disabled:l,type:$(t.type),placeholder:t.placeholder,multiline:!!t.rows,rows:t.rows??1,value:i,name:t.name,onChange:d=>{c(d.target.value),o(d.target.value)},inputProps:{step:t.step??1,style:{height:t.rows?"90px":"inherit"}}})}),s.jsx("div",{ref:L}),(t==null?void 0:t.acceptVariable)&&s.jsx(It,{open:w,anchorEl:x,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:s.jsx(tt,{disabled:l,availableNodesForVariable:S,onSelectAndReturnVal:d=>{I(d),y()}})})]})};_t.propTypes={inputParam:m.object,value:m.oneOfType([m.string,m.number]),onChange:m.func,disabled:m.bool,nodes:m.array,edges:m.array,nodeId:m.string};export{_t as I,E as L,tt as S,P as a,Pt as r};
