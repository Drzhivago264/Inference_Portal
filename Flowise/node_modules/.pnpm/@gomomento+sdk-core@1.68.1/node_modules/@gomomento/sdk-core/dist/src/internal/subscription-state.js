"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubscriptionState = void 0;
/**
 * Encapsulates a topic subscription stream state.
 */
class SubscriptionState {
    constructor() {
        this._unsubscribeFn = () => {
            return;
        };
        this._isSubscribed = false;
    }
    get resumeAtTopicSequenceNumber() {
        var _a;
        return ((_a = this.lastTopicSequenceNumber) !== null && _a !== void 0 ? _a : -1) + 1;
    }
    setSubscribed() {
        this._isSubscribed = true;
    }
    setUnsubscribed() {
        this._isSubscribed = false;
    }
    get isSubscribed() {
        return this._isSubscribed;
    }
    set unsubscribeFn(unsubscribeFn) {
        this._unsubscribeFn = unsubscribeFn;
    }
    unsubscribe() {
        if (this.isSubscribed) {
            this._unsubscribeFn();
            this.setUnsubscribed();
        }
    }
}
exports.SubscriptionState = SubscriptionState;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Vic2NyaXB0aW9uLXN0YXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2ludGVybmFsL3N1YnNjcmlwdGlvbi1zdGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQTs7R0FFRztBQUNILE1BQWEsaUJBQWlCO0lBSTVCO1FBQ0UsSUFBSSxDQUFDLGNBQWMsR0FBRyxHQUFHLEVBQUU7WUFDekIsT0FBTztRQUNULENBQUMsQ0FBQztRQUNGLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFXLDJCQUEyQjs7UUFDcEMsT0FBTyxDQUFDLE1BQUEsSUFBSSxDQUFDLHVCQUF1QixtQ0FBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBRU0sYUFBYTtRQUNsQixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztJQUM1QixDQUFDO0lBRU0sZUFBZTtRQUNwQixJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBVyxZQUFZO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUM1QixDQUFDO0lBRUQsSUFBVyxhQUFhLENBQUMsYUFBeUI7UUFDaEQsSUFBSSxDQUFDLGNBQWMsR0FBRyxhQUFhLENBQUM7SUFDdEMsQ0FBQztJQUVNLFdBQVc7UUFDaEIsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ3JCLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUN0QixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7U0FDeEI7SUFDSCxDQUFDO0NBQ0Y7QUFyQ0QsOENBcUNDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbmNhcHN1bGF0ZXMgYSB0b3BpYyBzdWJzY3JpcHRpb24gc3RyZWFtIHN0YXRlLlxuICovXG5leHBvcnQgY2xhc3MgU3Vic2NyaXB0aW9uU3RhdGUge1xuICBwcml2YXRlIF91bnN1YnNjcmliZUZuOiAoKSA9PiB2b2lkO1xuICBwdWJsaWMgbGFzdFRvcGljU2VxdWVuY2VOdW1iZXI/OiBudW1iZXI7XG4gIHByaXZhdGUgX2lzU3Vic2NyaWJlZDogYm9vbGVhbjtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fdW5zdWJzY3JpYmVGbiA9ICgpID0+IHtcbiAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIHRoaXMuX2lzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGdldCByZXN1bWVBdFRvcGljU2VxdWVuY2VOdW1iZXIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHRoaXMubGFzdFRvcGljU2VxdWVuY2VOdW1iZXIgPz8gLTEpICsgMTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRTdWJzY3JpYmVkKCk6IHZvaWQge1xuICAgIHRoaXMuX2lzU3Vic2NyaWJlZCA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgc2V0VW5zdWJzY3JpYmVkKCk6IHZvaWQge1xuICAgIHRoaXMuX2lzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGdldCBpc1N1YnNjcmliZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2lzU3Vic2NyaWJlZDtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgdW5zdWJzY3JpYmVGbih1bnN1YnNjcmliZUZuOiAoKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fdW5zdWJzY3JpYmVGbiA9IHVuc3Vic2NyaWJlRm47XG4gIH1cblxuICBwdWJsaWMgdW5zdWJzY3JpYmUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTdWJzY3JpYmVkKSB7XG4gICAgICB0aGlzLl91bnN1YnNjcmliZUZuKCk7XG4gICAgICB0aGlzLnNldFVuc3Vic2NyaWJlZCgpO1xuICAgIH1cbiAgfVxufVxuIl19