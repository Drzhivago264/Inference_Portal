import { getEnv } from "@llamaindex/env";
import Replicate from "replicate";
export class ReplicateSession {
    replicateKey = null;
    replicate;
    constructor(replicateKey = null){
        if (replicateKey) {
            this.replicateKey = replicateKey;
        } else if (getEnv("REPLICATE_API_TOKEN")) {
            this.replicateKey = getEnv("REPLICATE_API_TOKEN");
        } else {
            throw new Error("Set Replicate token in REPLICATE_API_TOKEN env variable");
        }
        this.replicate = new Replicate({
            auth: this.replicateKey
        });
    }
}
let defaultReplicateSession = null;
export function getReplicateSession(replicateKey = null) {
    if (!defaultReplicateSession) {
        defaultReplicateSession = new ReplicateSession(replicateKey);
    }
    return defaultReplicateSession;
}
