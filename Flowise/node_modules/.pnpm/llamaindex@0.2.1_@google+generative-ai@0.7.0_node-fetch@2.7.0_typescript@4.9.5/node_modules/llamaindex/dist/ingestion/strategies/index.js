import { DuplicatesStrategy } from "./DuplicatesStrategy.js";
import { UpsertsStrategy } from "./UpsertsStrategy.js";
export var DocStoreStrategy;
(function(DocStoreStrategy) {
    DocStoreStrategy["UPSERTS"] = "upserts";
    DocStoreStrategy["DUPLICATES_ONLY"] = "duplicates_only";
    DocStoreStrategy["UPSERTS_AND_DELETE"] = "upserts_and_delete";
})(DocStoreStrategy || (DocStoreStrategy = {}));
export function createDocStoreStrategy(docStoreStrategy, docStore, vectorStore) {
    if (docStore && vectorStore) {
        if (docStoreStrategy === "upserts" || docStoreStrategy === "upserts_and_delete") {
            return new UpsertsStrategy(docStore, vectorStore);
        } else if (docStoreStrategy === "duplicates_only") {
            return new DuplicatesStrategy(docStore);
        } else {
            throw new Error(`Invalid docstore strategy: ${docStoreStrategy}`);
        }
    } else if (docStore && !vectorStore) {
        if (docStoreStrategy === "upserts") {
            console.warn("Docstore strategy set to upserts, but no vector store. Switching to duplicates_only strategy.");
        } else if (docStoreStrategy === "upserts_and_delete") {
            console.warn("Docstore strategy set to upserts and delete, but no vector store. Switching to duplicates_only strategy.");
        }
        return new DuplicatesStrategy(docStore);
    }
}
