"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "SimpleIndexStore", {
    enumerable: true,
    get: function() {
        return SimpleIndexStore;
    }
});
const _env = require("@llamaindex/env");
const _constants = require("../constants.js");
const _SimpleKVStore = require("../kvStore/SimpleKVStore.js");
const _KVIndexStore = require("./KVIndexStore.js");
class SimpleIndexStore extends _KVIndexStore.KVIndexStore {
    kvStore;
    constructor(kvStore){
        kvStore = kvStore || new _SimpleKVStore.SimpleKVStore();
        super(kvStore);
        this.kvStore = kvStore;
    }
    static async fromPersistDir(persistDir = _constants.DEFAULT_PERSIST_DIR, fs = _env.defaultFS) {
        const persistPath = _env.path.join(persistDir, _constants.DEFAULT_INDEX_STORE_PERSIST_FILENAME);
        return this.fromPersistPath(persistPath, fs);
    }
    static async fromPersistPath(persistPath, fs = _env.defaultFS) {
        const simpleKVStore = await _SimpleKVStore.SimpleKVStore.fromPersistPath(persistPath, fs);
        return new SimpleIndexStore(simpleKVStore);
    }
    async persist(persistPath = _constants.DEFAULT_PERSIST_DIR, fs = _env.defaultFS) {
        await this.kvStore.persist(persistPath, fs);
    }
    static fromDict(saveDict) {
        const simpleKVStore = _SimpleKVStore.SimpleKVStore.fromDict(saveDict);
        return new SimpleIndexStore(simpleKVStore);
    }
    toDict() {
        if (!(this.kvStore instanceof _SimpleKVStore.SimpleKVStore)) {
            throw new Error("KVStore is not a SimpleKVStore");
        }
        return this.kvStore.toDict();
    }
}
