"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    ReplicateSession: function() {
        return ReplicateSession;
    },
    getReplicateSession: function() {
        return getReplicateSession;
    }
});
const _env = require("@llamaindex/env");
const _replicate = /*#__PURE__*/ _interop_require_default(require("replicate"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
class ReplicateSession {
    replicateKey = null;
    replicate;
    constructor(replicateKey = null){
        if (replicateKey) {
            this.replicateKey = replicateKey;
        } else if ((0, _env.getEnv)("REPLICATE_API_TOKEN")) {
            this.replicateKey = (0, _env.getEnv)("REPLICATE_API_TOKEN");
        } else {
            throw new Error("Set Replicate token in REPLICATE_API_TOKEN env variable");
        }
        this.replicate = new _replicate.default({
            auth: this.replicateKey
        });
    }
}
let defaultReplicateSession = null;
function getReplicateSession(replicateKey = null) {
    if (!defaultReplicateSession) {
        defaultReplicateSession = new ReplicateSession(replicateKey);
    }
    return defaultReplicateSession;
}
