"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "storageContextFromDefaults", {
    enumerable: true,
    get: function() {
        return storageContextFromDefaults;
    }
});
const _env = require("@llamaindex/env");
const _constants = require("./constants.js");
const _SimpleDocumentStore = require("./docStore/SimpleDocumentStore.js");
const _SimpleIndexStore = require("./indexStore/SimpleIndexStore.js");
const _SimpleVectorStore = require("./vectorStore/SimpleVectorStore.js");
async function storageContextFromDefaults({ docStore, indexStore, vectorStore, imageVectorStore, storeImages, persistDir, fs }) {
    if (!persistDir) {
        docStore = docStore || new _SimpleDocumentStore.SimpleDocumentStore();
        indexStore = indexStore || new _SimpleIndexStore.SimpleIndexStore();
        vectorStore = vectorStore || new _SimpleVectorStore.SimpleVectorStore();
        imageVectorStore = storeImages ? new _SimpleVectorStore.SimpleVectorStore() : imageVectorStore;
    } else {
        fs = fs || _env.defaultFS;
        docStore = docStore || await _SimpleDocumentStore.SimpleDocumentStore.fromPersistDir(persistDir, _constants.DEFAULT_NAMESPACE, fs);
        indexStore = indexStore || await _SimpleIndexStore.SimpleIndexStore.fromPersistDir(persistDir, fs);
        vectorStore = vectorStore || await _SimpleVectorStore.SimpleVectorStore.fromPersistDir(persistDir, fs);
        imageVectorStore = storeImages ? await _SimpleVectorStore.SimpleVectorStore.fromPersistDir(_env.path.join(persistDir, _constants.DEFAULT_IMAGE_VECTOR_NAMESPACE), fs) : imageVectorStore;
    }
    return {
        docStore,
        indexStore,
        vectorStore,
        imageVectorStore
    };
}
