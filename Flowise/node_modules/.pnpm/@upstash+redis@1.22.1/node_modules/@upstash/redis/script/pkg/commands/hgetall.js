"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.HGetAllCommand = void 0;
const command_js_1 = require("./command.js");
function deserialize(result) {
    if (result.length === 0) {
        return null;
    }
    const obj = {};
    while (result.length >= 2) {
        const key = result.shift();
        const value = result.shift();
        try {
            obj[key] = JSON.parse(value);
        }
        catch {
            obj[key] = value;
        }
    }
    return obj;
}
/**
 * @see https://redis.io/commands/hgetall
 */
class HGetAllCommand extends command_js_1.Command {
    constructor(cmd, opts) {
        super(["hgetall", ...cmd], {
            deserialize: (result) => deserialize(result),
            ...opts,
        });
    }
}
exports.HGetAllCommand = HGetAllCommand;
