"use strict";(self.webpackChunkinference_portal=self.webpackChunkinference_portal||[]).push([[939],{44058:(e,t,n)=>{n.d(t,{b:()=>p});var r=n(96540),a=n(69067),o=n(48139),l=n(30995),i=n(29571),c=n(73896),u=n(4147),s=n(50779),m=n(14073),f=n(24610);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){var t=e.chat_message,n=e.choosen_export_format_chatlog,p=e.setChoosenExportFormatChatLog,h=e.number_of_remove_message;return r.createElement(a.A,{mt:2},r.createElement(m.A,{pb:2},"Chat Log Export:"),r.createElement("form",{onSubmit:function(e){e.preventDefault();var r,a=function(e){if(Array.isArray(e))return d(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=document.createElement("a");if(".json"==n){var l=JSON.stringify(a.splice(h),null,4),i=new Blob([l],{type:"application/json"}),c=URL.createObjectURL(i);o.setAttribute("href",c),o.setAttribute("download","Chat_log_from_Professor_Parakeet.json")}else if(".txt"==n){var u=a.splice(h);for(var s in l="",u)l+=u[s].role+"-"+u[s].time+":\n"+u[s].message+"\n";i=new Blob([l],{type:"text/plain"}),c=URL.createObjectURL(i),o.setAttribute("href",c),o.setAttribute("download","Chat_log_from_Professor_Parakeet.txt")}o.click()}},r.createElement(s.A,null,r.createElement(l.A,{direction:"row",spacing:1},r.createElement(i.A,{id:"export-label-chatlog"},"Formats"),r.createElement(u.A,{labelId:"export-label-chatlog",id:"export-select-chatlog",onChange:function(e){return p(e.target.value)},value:n,label:"Export",size:"small"},[".json",".txt"].map((function(e){return r.createElement(c.A,{key:e,value:e},e)}))),r.createElement(o.A,{size:"small",variant:"contained",type:"submit",endIcon:r.createElement(f.A,null)},"Export")))))}},56939:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var r=n(96540),a=n(46266),o=n(69067),l=n(8239),i=n(60538),c=n(97834),u=n(35453),s=(n(92497),n(83248),n(44058),n(38960)),m=n(14073),f=n(21162),d=n(58981),p=n(69279),h=n(42702),A=n(11641);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const g=function(){var e=y((0,r.useState)(null),2),t=e[0],n=e[1],b=y((0,r.useState)([]),2),g=b[0],E=b[1],v=y((0,r.useState)(null),2),x=v[0],S=v[1],_=function(e,t,n,r){t||(t="id"),n||(n="parent"),r||(r="children");var a=[],o=[],l={};return e.forEach((function(e){l[e[t]]=e,e[r]=[],o.push(e[t].toString())})),e.forEach((function(e){null!=e[n]&&void 0!==l[e[n]]?l[e[n]][r].push(e):a.push(e)})),[a,o]};(0,r.useEffect)((function(){a.A.all([a.A.get("/frontend-api/get-user-instruction")]).then(a.A.spread((function(e){if(204!=e.status){console.log(e.data.root_nodes);var t=_(e.data.root_nodes);n(t[0]),E(t[1]),e.data.count&&S(e.data.count)}}))).catch((function(e){console.log(e)}))}),[]);var w=function e(t){var n=t.data;return r.createElement(f.G,{defaultExpandedItems:g,"aria-label":"file system navigator",sx:{maxHeight:700,flexGrow:1,maxWidth:600,overflowY:"auto"}},n.map((function(t){return r.createElement(d.y,{key:t.id.toString(),itemId:t.id.toString(),label:new Date(t.created_at).toString()},r.createElement(i.A,null,r.createElement(m.A,{pl:1,pr:1,pt:1,variant:"body2"}," ","Prompt: "+t.prompt," "),r.createElement(m.A,{pl:1,pr:1,pb:1,variant:"body2"},"Response: "+t.response," ")),t.children&&r.createElement(e,{data:t.children}))})))};return r.createElement(c.A,{maxWidth:!1,sx:{minWidth:1200},disableGutters:!0},r.createElement("title",null,"Chat"),r.createElement(u.A,null),r.createElement(c.A,{maxWidth:"xl",sx:{minWidth:1200}},r.createElement(o.A,{m:2},r.createElement(l.Ay,{container:!0,spacing:2},r.createElement(l.Ay,{item:!0,xs:4},r.createElement(m.A,{mt:1,mb:1,variant:"body1"},"Instruction Template",r.createElement(A.A,{"aria-label":"fingerprint",color:"info",size:"small",onClick:function(){a.A.all([a.A.get("/frontend-api/get-user-instruction")]).then(a.A.spread((function(e){if(204!=e.status){var t=_(e.data.results);n(t[0]),E(t[1]),e.data.count&&S(e.data.count)}}))).catch((function(e){console.log(e)}))}},r.createElement(h.A,{fontSize:"small"}))),t&&r.createElement(w,{data:t}),!t&&r.createElement(m.A,{variant:"body2"},"No template yet."),x&&t&&r.createElement(o.A,{display:"flex",justifyContent:"center",alignItems:"center",m:1}," ",r.createElement(p.A,{count:x,showFirstButton:!0,showLastButton:!0,onChange:function(e,t){a.A.all([a.A.get("/frontend-api/memory-tree?page=".concat(t))]).then(a.A.spread((function(e){if(204!=e.status){var t=_(e.data.results);n(t[0]),E(t[1]),e.data.count&&S(e.data.count)}}))).catch((function(e){console.log(e)}))}}))),r.createElement(l.Ay,{item:!0,xs:6},r.createElement(l.Ay,{item:!0,xs:2}))))),r.createElement(s.A,null))}}}]);