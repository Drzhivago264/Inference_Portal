"use strict";(self.webpackChunkinference_portal=self.webpackChunkinference_portal||[]).push([[111],{83248:(e,t,n)=>{n.d(t,{a:()=>h,s:()=>g});var r=n(96540),a=n(69067),l=n(48139),i=n(60538),o=n(30995),s=n(25239),c=n(8239),m=n(87458),d=n(40443),p=n(11641),u=n(70177),g=function(e){var t=e.inputsize,n=e.ChatPaper,g=e.ChatInput,h=e.chat_message,f=e.shownthinking,E=e.usermessage,y=e.setUserMessage,A=e.usermessageError,b=e.submitChat,w=e.messagesEndRef,x=e.handleEnter,_=function(e){navigator.clipboard.writeText(e)};return r.createElement(a.A,null,r.createElement(n,{id:"chat-log",variant:"outlined"},r.createElement(o.A,{spacing:1},h.map((function(e){return"Human"==e.role?r.createElement(i.A,{key:e.time},r.createElement(a.A,{sx:{borderRight:5,borderColor:"primary.main",borderRadius:1},p:1,className:"message_log_container"},r.createElement(c.Ay,{item:!0,sx:{display:"flex",justifyContent:"space-between"}},r.createElement(a.A,{align:"left"},r.createElement(p.A,{onClick:function(){return _("".concat(e.role," (").concat(e.time,")\n\n").concat(e.message))},"aria-label":"copy",size:"small"},r.createElement(u.A,{fontSize:"small"}))),r.createElement(a.A,{pt:.8},r.createElement(a.A,{textAlign:"right"},e.role," (",e.time,")"),r.createElement(a.A,{display:"flex",sx:{wordBreak:"break-word"},justifyContent:"flex-end",style:{whiteSpace:"pre-wrap",width:"100%"}},e.message))))):e.holder?r.createElement(i.A,{key:e.holderid},r.createElement(a.A,{p:1,sx:{borderLeft:5,borderRadius:1},className:"message_log_container",style:{whiteSpace:"pre-line"},id:e.holderid},r.createElement(c.Ay,{item:!0,sx:{display:"flex",justifyContent:"space-between"}},r.createElement(a.A,{pt:.8,align:"left",sx:{wordBreak:"break-word"},style:{whiteSpace:"pre-wrap"}},r.createElement("span",null,e.role," - ",e.time,": ",r.createElement("br",null),r.createElement("br",null),e.message)),r.createElement(a.A,{align:"right"},r.createElement(p.A,{onClick:function(){return _("".concat(e.role," - ").concat(e.time,":\n\n").concat(e.message))},"aria-label":"copy",size:"small"},r.createElement(u.A,{fontSize:"small"})))))):"Server"==e.role?r.createElement(i.A,{key:e.message+e.time},r.createElement(a.A,{p:1,sx:{borderLeft:5,borderRadius:1},className:"message_log_container",style:{whiteSpace:"pre-line"}},r.createElement(c.Ay,{item:!0,sx:{display:"flex",justifyContent:"space-between"}},r.createElement(a.A,{pt:.8,align:"left",style:{whiteSpace:"pre-wrap"}},r.createElement("span",null,e.message," (",e.role," - ",e.time,") ")),r.createElement(a.A,{align:"right"},r.createElement(p.A,{onClick:function(){return _("".concat(e.message," (").concat(e.role," - ").concat(e.time,")"))},"aria-label":"copy",size:"small"},r.createElement(u.A,{fontSize:"small"})))))):void 0})),r.createElement("div",{ref:w}," "))),f&&r.createElement(m.A,null),r.createElement(a.A,{mt:2},r.createElement(i.A,{component:"form",sx:{p:"2px 4px",display:"flex",minWidth:{inputsize:t}}},r.createElement(g,{id:"standard-multiline-flexible",multiline:!0,maxRows:6,value:E,error:A,onChange:function(e){return y(e.target.value)},onKeyUp:function(e){return x(e)},minRows:4,variant:"standard",InputProps:{endAdornment:r.createElement(s.A,{sx:{position:"absolute",bottom:30,right:10},position:"end"},r.createElement(l.A,{sx:{height:32},variant:"contained",size:"small",onClick:b,endIcon:r.createElement(d.A,null)},"Send")),startAdornment:r.createElement(s.A,{position:"start"},"   ")}}))))},h=function(e){var t=e.id,n=e.inputsize,g=e.ChatPaper,h=e.ChatInput,f=e.chat_message,E=e.shownthinking,y=e.usermessage,A=e.setUserMessage,b=e.usermessageError,w=e.submitChat,x=e.messagesEndRef,_=e.handleEnter,v=e.check_duplicate_message,S=function(e){navigator.clipboard.writeText(e)};return r.createElement(a.A,null,r.createElement(g,{id:t,variant:"outlined"},r.createElement(o.A,{spacing:1},f.map((function(e){return"Human"==e.role?r.createElement(i.A,{key:e.time+e.message},r.createElement(a.A,{sx:{borderRight:5,borderColor:"primary.main",borderRadius:1},p:1,className:"message_log_container",style:{whiteSpace:"pre-wrap"}},r.createElement(c.Ay,{item:!0,sx:{display:"flex",justifyContent:"space-between"}},r.createElement(a.A,{align:"left"},r.createElement(p.A,{onClick:function(){return S("".concat(e.role," (").concat(e.time,")\n\n").concat(e.message))},"aria-label":"copy",size:"small"},r.createElement(u.A,{fontSize:"small"}))),r.createElement(a.A,{pt:.8},r.createElement(a.A,{textAlign:"right"},e.role," (",e.time,")"),r.createElement(a.A,{display:"flex",sx:{wordBreak:"break-word"},justifyContent:"flex-end",style:{whiteSpace:"pre-wrap"}},e.message))))):e.holder?r.createElement(i.A,{key:e.holderid},r.createElement(a.A,{p:1,sx:{borderLeft:5,borderRadius:1},className:"message_log_container",style:{whiteSpace:"pre-line"},id:e.holderid},r.createElement(c.Ay,{item:!0,sx:{display:"flex",justifyContent:"space-between"}},r.createElement(a.A,{pt:.8,align:"left",sx:{wordBreak:"break-word"},style:{whiteSpace:"pre-wrap"}},r.createElement("span",null,e.role," - ",e.time,": ",r.createElement("br",null),r.createElement("br",null),e.message)),r.createElement(a.A,{align:"right"},r.createElement(p.A,{onClick:function(){return S("".concat(e.role," - ").concat(e.time,":\n\n").concat(e.message))},"aria-label":"copy",size:"small"},r.createElement(u.A,{fontSize:"small"})))))):"Server"==e.role?r.createElement(i.A,{key:e.message},r.createElement(a.A,{p:1,sx:{borderLeft:5,borderRadius:1},className:"message_log_container",style:{whiteSpace:"pre-line"}},r.createElement(c.Ay,{item:!0,sx:{display:"flex",justifyContent:"space-between"}},r.createElement(a.A,{pt:.8,align:"left",style:{whiteSpace:"pre-wrap"}},r.createElement("span",null,e.message," (",e.role," - ",e.time,") ")),r.createElement(a.A,{align:"right"},r.createElement(p.A,{onClick:function(){return S("".concat(e.message," (").concat(e.role," - ").concat(e.time,")"))},"aria-label":"copy",size:"small"},r.createElement(u.A,{fontSize:"small"})))))):void 0})),r.createElement("div",{ref:x}," "))),E&&r.createElement(m.A,null),r.createElement(a.A,{mt:2},r.createElement(i.A,{component:"form",sx:{p:"2px 4px",display:"flex",minWidth:{inputsize:n}}},r.createElement(h,{id:"standard-multiline-flexible",multiline:!0,maxRows:6,value:y,error:b,onChange:function(e){A(e.target.value),v(e.target.value)},onKeyUp:function(e){return _(e)},minRows:4,variant:"standard",InputProps:{endAdornment:r.createElement(s.A,{sx:{position:"absolute",bottom:30,right:10},position:"end"},r.createElement(l.A,{sx:{height:32},variant:"contained",size:"small",onClick:w,endIcon:r.createElement(d.A,null)},"Send")),startAdornment:r.createElement(s.A,{position:"start"},"   ")}}))))}},6276:(e,t,n)=>{function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,a){e.current.onopen=function(){console.log("WebSocket  Connected")},e.current.onclose=function(){console.log("WebSocket  Disconnected")},e.current.onmessage=function(e){var l=JSON.parse(e.data);if(l){"Human"==l.role||"Server"==l.role||l.holder?(l.holder&&(n(!0),l.message=""),t((function(e){return[].concat(r(e),[{holder:l.holder,holderid:l.holderid,role:l.role,time:l.time,credit:l.credit,message:l.message}])}))):(n(!1),t((function(e){return[].concat(r(e.slice(0,-1)),[{holder:e[e.length-1].holder,holderid:e[e.length-1].holderid,role:e[e.length-1].role,time:e[e.length-1].time,credit:e[e.length-1].credit,message:e[e.length-1].message+=l.message}])})));var i=a.getElementById("chat-log");i.scrollTop=i.scrollHeight}}}function i(e,t,n,a,l,i,o,s,c,m,d,p,u,g){e.current.onopen=function(){console.log("WebSocket  Connected")},e.current.onclose=function(){console.log("WebSocket  Disconnected")},e.current.onmessage=function(e){var h=JSON.parse(e.data);if(h){if(h.hasOwnProperty("swap_template")){if(s){var f=[];for(var E in h.child_template_name_list)f.push({displayed_name:h.child_template_name_list[E]});c(h.swap_instruction),m(h.default_child_instruct),d(f);var y={time:1709749130861,blocks:[{id:"1hYKvu7PTO",type:"header",data:{text:"Response",level:2}},{id:"SrV68agaen",type:"paragraph",data:{text:""}}],version:"2.29.1"};p&&p(y),g&&g.current.render(y)}else{var A=[];for(var E in h.child_template_name_list)A.push({name:h.child_template_name_list[E]});l(h.swap_instruction),i(h.default_child_instruct),o(A),p&&p(JSON.parse(h.swap_template)),g&&g.current.render(JSON.parse(h.swap_template))}h.message=""}else h.hasOwnProperty("child_instruct")?(s?m(h.child_instruct):i(h.child_instruct),h.message=""):h.hasOwnProperty("paragraph")&&u&&(u(h.paragraph),h.message="");if("Human"==h.role||"Server"==h.role||h.holder)h.holder&&(n(!0),h.message=""),t((function(e){return[].concat(r(e),[{holder:h.holder,holderid:h.holderid,role:h.role,time:h.time,credit:h.credit,message:h.message}])}));else if(h.hasOwnProperty("agent_action")){if("STOP"==h.agent_action||"NEXT"==h.agent_action){var b={type:"paragraph",data:{text:h.full_result.replace(/\n/g,"<br>")}};g.current.blocks.insert(b.type,b.data,null,h.result_id)}}else n(!1),t((function(e){return[].concat(r(e.slice(0,-1)),[{holder:e[e.length-1].holder,holderid:e[e.length-1].holderid,role:e[e.length-1].role,time:e[e.length-1].time,credit:e[e.length-1].credit,message:e[e.length-1].message+=h.message}])}));if(!(w=a.getElementById("chat-log")))var w=a.getElementById("chat-log-agent");w.scrollTop=w.scrollHeight}}}n.d(t,{j:()=>i,u:()=>l})}}]);